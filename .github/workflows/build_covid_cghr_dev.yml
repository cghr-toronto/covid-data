name: build_covid_cghr_dev
on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]
jobs:
  build_covid_cghr_dev:
    runs-on: ubuntu-18.04
    steps:
    - uses: actions/checkout@v2
      with:
        repository: cghr-toronto/covid.cghr.dev
        token: 7eeb2f7baab25f792932925305710d5097efe6cc 
    - name: Pull covid-data submodule
      run: |
        cd covid.cghr.dev
        git submodule update --init --recursive
        git submodule update --recursive --remote
    - name: Install snap
      run: | 
        sudo apt update
        sudo apt install snapd
    - name: Install hugo
      run: |
        sudo snap install hugo
    - name: Build website with hugo
      run: hugo --minify
